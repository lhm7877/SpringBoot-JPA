## 설계시 주의점

### Entity에서는 Setter 사용 X

### 모든 연관관계는 지연로딩으로 설정!
- EAGER는 예측 어렵고, N+1 문제
- 연관된 Entity 조회는 fetch join 또는 엔티티 그래프 기능 사용

### 컬렉션은 필드에서 초기화하자
- 컬렉션을 바꾸지 말고 그대로 쓰자
    - 영속 하는 순간 hibernate가 collection을 감싸기 때문에 컬렉션을 바꾸면 예상치 못한 동작이 발생한다.

## 어플리케이션 아키텍처

### 계층형 구조 사용
- Controller, web: 웹 계층
- Service: 비즈니스 로직, 트랜잭션 처리
- Repository: JPA를 직접 사용하는 계층, 엔티티 매니저 사용
- Domain: 엔티티가 모여 있는 계층, ***모든 계층에서 사용***
- Controller에서 Repository 사용 가능
- Controller -> Service -> Repository -> DB 단방향

### 커맨드와 쿼리 분리
- 메서드를 호출 했을 때, 내부에서 변경(사이드 이펙트)가 일어나는 메서드인지, 아니면 내부에서 변경이 전혀 일어나지 않는 메서드인지 명확히 분리하는 것
- insert는 id만 반환하고(아무것도 없으면 조회가 안되니), update는 아무것도 반환하지 않고, 조회는 내부의 변경이 없는 메서드로 설계하면 좋다